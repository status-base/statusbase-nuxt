var S=Object.defineProperty;var w=Object.getOwnPropertySymbols;var b=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable;var m=(i,e,t)=>e in i?S(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,n=(i,e)=>{for(var t in e||(e={}))b.call(e,t)&&m(i,t,e[t]);if(w)for(var t of w(e))C.call(e,t)&&m(i,t,e[t]);return i};import{d as k,t as N,c as _,e as $,a as O,h as A,w as Q,f as j}from"./entry-04f2ec62.mjs";import{q as P}from"./query-fd095133.mjs";import"./json-ed319409.mjs";import"./utils-fdd1a8ec.mjs";var T=k({props:{path:{type:String,required:!1,default:void 0},only:{type:Array,required:!1,default:void 0},without:{type:Array,required:!1,default:void 0},where:{type:Object,required:!1,default:void 0},sort:{type:Object,required:!1,default:void 0},limit:{type:Number,required:!1,default:void 0},skip:{type:Number,required:!1,default:void 0},locale:{type:String,required:!1,default:void 0},find:{type:String,required:!1,default:void 0}},async setup(i){const{path:e,only:t,without:l,where:a,sort:o,limit:s,skip:d,locale:f,find:p}=N(i),h=_(()=>e.value.includes("/_")),{data:v,refresh:y}=await $(`content-doc-${e.value}`,()=>{let r=P();if(e.value){const u=Q(j(e.value));r=r.where({_path:u})}return t.value&&(r=r.only(t.value)),l.value&&(r=r.without(l.value)),a.value&&(r=r.where(a.value)),o.value&&(r=r.sort(o.value)),s.value&&(r=r.limit(s.value)),d.value&&(r=r.skip(d.value)),f.value&&(r=r.where({_locale:f.value})),p.value==="one"?r.findOne():p.value==="surround"?e.value?r.findSurround(e):(console.warn("[Content] Surround queries requires `path` prop to be set."),console.warn("[Content] Query without `path` will return regular `find()` results."),r.find()):r.find()});return{isPartial:h,data:v,refresh:y}},render(i){var c;const e=O(),{data:t,refresh:l,isPartial:a,path:o,only:s,without:d,where:f,sort:p,limit:h,skip:v,locale:y,find:r}=i,u={path:o,only:s,without:d,where:f,sort:p,limit:h,skip:v,locale:y,find:r};if(u.find==="one"){if(!t&&(e==null?void 0:e["not-found"]))return e["not-found"](n({props:u},this.$attrs));if(t._type&&t._type==="markdown"&&!((c=t==null?void 0:t.body)!=null&&c.children.length))return e.empty(n({props:u},this.$attrs))}else if((!t||!t.length)&&e!=null&&e["not-found"])return e["not-found"](n({props:u},this.$attrs));return e!=null&&e.default?e.default(n({data:t,refresh:l,isPartial:a,props:u},this.$attrs)):((q,g)=>A("pre",null,JSON.stringify({message:"You should use slots with <ContentQuery>!",slot:q,data:g},null,2)))("default",{data:t,props:u,isPartial:a})}});export{T as default};
